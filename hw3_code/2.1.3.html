<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Visualization</title>
    <script src="https://d3js.org/d3.v5.min.js"></script>
</head>

<body>

    <!-- open CSV FILE
    <input type="file" accept=".csv" id="open"/> -->
    
    <!-- GENERATE HTML TABLE -->
    <table id="data-table"></table>

    <script>

        d3.csv("auto-mpg.csv").then(function(data) {
            var table = "<table><thead><tr><th>model</th><th>count</th></tr></thead><tbody>";
            var carCounts = data.reduce(function(counts, item) {
                var cylinders = parseInt(item["cylinders"]);
                counts[item["model-year"]] = (counts[item["model-year"]] || 0) + cylinders;
                return counts;
            }, {});
            for (var model in carCounts) {
                var count = carCounts[model];
                table += "<tr><td>" + model + "</td><td>" + count +"</td></tr>";}
                
            table += "</tbody></table>";

            document.getElementById("data-table").innerHTML = table;
        });

    </script>

</body>

</html>